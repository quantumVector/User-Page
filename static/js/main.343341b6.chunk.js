(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{128:function(e,t,a){e.exports={wrap:"Footer_wrap__2e-v6"}},152:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),s=a.n(c),i=(a(152),a(22)),o=a(128),l=a.n(o),u=a(3),j=function(){return Object(u.jsx)("footer",{className:l.a.wrap,children:"User Page Project 2021"})},d=a(36),b=a(82),h=a.n(b),m=a(11),O=a(64),f=Object(n.createContext)({}),x=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(m.a)(a,2),c=r[0],s=r[1],i=Object(O.b)();Object(n.useEffect)((function(){var e=Object(O.c)(i,(function(e){s(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var o=Object(n.useMemo)((function(){return{user:c,setUser:s,auth:i}}),[c]);return Object(u.jsx)(f.Provider,{value:o,children:t})},p=function(){return Object(n.useContext)(f)},g=a(41),v=a(298),w=function(){var e=p(),t=e.auth,a=e.user,n=Object(i.g)();return Object(u.jsxs)("header",{className:h.a.wrap,children:[Object(u.jsx)("div",{className:h.a.logo,children:"User Page Project"}),Object(u.jsx)("div",{className:h.a.links,children:a?Object(u.jsx)(v.a,{onClick:function(){Object(g.c)(t).then((function(){n("/")})).catch((function(e){console.log("faild",e)}))},size:"large",variant:"contained",children:"Log out"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v.a,{component:d.c,to:"/",size:"large",variant:"contained",sx:{marginRight:3},children:"Login"}),Object(u.jsx)(v.a,{component:d.c,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},y=function(){return Object(u.jsxs)("div",{className:"app-wrapper",children:[Object(u.jsx)(w,{}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(i.a,{})}),Object(u.jsx)(j,{})]})},S=a(32),P=a(296),C=a(299),_=a(302),k=a(27),N=a(294),z=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(u.jsx)(k.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(u.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.email,helperText:a.email?null===(t=a.email)||void 0===t?void 0:t.message:""}))}})},T=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(u.jsx)(k.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(u.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.password,helperText:a.password?null===(t=a.password)||void 0===t?void 0:t.message:""}))}})},I=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(u.jsx)(k.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(u.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.confirmPassword,helperText:a.confirmPassword?null===(t=a.confirmPassword)||void 0===t?void 0:t.message:""}))}})},L=function(e){var t=e.text;return Object(u.jsx)(_.a,{textAlign:"center",children:Object(u.jsx)(v.a,{type:"submit",variant:"outlined",size:"large",children:t})})},U=a(80),A=a(44),E=A.a().shape({email:A.c().email().required(),password:A.c().min(8).max(20).required()}),q=A.a().shape({email:A.c().email().required(),password:A.c().required().min(8).max(20),confirmPassword:A.c().required().oneOf([A.b("password"),null],"Passwords must match")}),B=function(){var e=p(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(U.a)(E)}),c=Object(n.useState)(""),s=Object(m.a)(c,2),o=s[0],l=s[1],j=Object(i.g)();Object(n.useEffect)((function(){a&&j("/user/".concat(a.id))}),[a]);return Object(u.jsxs)(u.Fragment,{children:[o&&Object(u.jsx)(P.a,{severity:"error",style:{margin:20},children:o}),Object(u.jsx)("h1",{children:"Login"}),Object(u.jsx)(C.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"",children:Object(u.jsx)(k.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(u.jsxs)("form",{onSubmit:r.handleSubmit((function(e){Object(g.b)(t,e.email,e.password).then((function(e){var t=e.user;j("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(t="The email or password is incorrect."),l(t||e.message)}))})),children:[Object(u.jsx)(z,{}),Object(u.jsx)(T,{}),Object(u.jsx)(L,{text:"Login"}),Object(u.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(u.jsxs)("div",{children:["Don't have an account? ",Object(u.jsx)(d.b,{to:"/signup",children:"Sign up"})]})})]})}))})]})},W=a(1),D=a.n(W),F=a(5),J=function(){var e=p(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(U.a)(q)}),c=Object(n.useState)(""),s=Object(m.a)(c,2),o=s[0],l=s[1],j=Object(i.g)();Object(n.useEffect)((function(){a&&j("/user/".concat(a.id))}),[a]);var b=function(){var e=Object(F.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)(t,a.email,a.password).then((function(e){var t=e.user;j("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/email-already-in-use"===e.code&&(t="This email address has already been registered."),l(t||e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[o&&Object(u.jsx)(P.a,{severity:"error",style:{margin:20},children:o}),Object(u.jsx)("h1",{children:"Sign up"}),Object(u.jsx)(C.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"",children:Object(u.jsx)(k.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(u.jsxs)("form",{onSubmit:r.handleSubmit(b),children:[Object(u.jsx)(z,{}),Object(u.jsx)(T,{}),Object(u.jsx)(I,{}),Object(u.jsx)(L,{text:"Sign up"}),Object(u.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(u.jsxs)("div",{children:["Already have an account?  ",Object(u.jsx)(d.b,{to:"/",children:"Log in"})]})})]})}))})]})},G=a(58),H=a.n(G),M=a(300),V=a.p+"static/media/avatar-default-icon.3d77e961.png",Y=[{path:"/",element:B,auth:!1},{path:"/user/:id",element:function(){var e=p(),t=e.auth,a=e.user,r=Object(n.useState)(!1),c=Object(m.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),j=l[0],d=l[1],b=Object(n.useState)(!1),h=Object(m.a)(b,2),O=h[0],f=h[1],x=Object(n.useState)(""),w=Object(m.a)(x,2),y=w[0],S=w[1],C=Object(n.useState)(""),_=Object(m.a)(C,2),k=_[0],z=_[1],T=Object(n.useState)(""),I=Object(m.a)(T,2),L=I[0],U=I[1];Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.email)&&d(a.email)}),[a]);return Object(u.jsxs)("div",{className:H.a.wrap,children:[Object(u.jsx)(M.a,{src:V,sx:{width:300,height:300}}),k&&Object(u.jsx)(P.a,{severity:"error",style:{margin:20},children:k}),L&&Object(u.jsx)(P.a,{severity:"success",style:{margin:20},children:L}),Object(u.jsxs)("div",{className:H.a.items,children:[!s&&Object(u.jsxs)("div",{className:H.a.email,children:[Object(u.jsx)("div",{children:j}),Object(u.jsx)(v.a,{onClick:function(){return i(!0)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change email"})]}),s&&Object(u.jsxs)("div",{className:H.a.email,children:[Object(u.jsx)(N.a,{label:"Enter new email",variant:"standard",onChange:function(e){return d(e.target.value)}}),Object(u.jsx)(v.a,{onClick:function(){t.currentUser&&Object(g.d)(t.currentUser,j).then((function(){U("Email change was successful!"),z("")})).catch((function(e){var t="";"auth/requires-recent-login"===e.code&&(t="You need to log into your account AGAIN to change your mail."),"auth/invalid-email"===e.code&&(t="Please enter a valid email."),z(t||e.message),U(""),(null===a||void 0===a?void 0:a.email)&&d(a.email)})),i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(u.jsx)(v.a,{onClick:function(){return i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]}),!O&&Object(u.jsx)(v.a,{onClick:function(){return f(!0)},size:"small",variant:"contained",children:"Change password"}),O&&Object(u.jsxs)("div",{className:H.a.item,children:[Object(u.jsx)(N.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return S(e.target.value)}}),Object(u.jsx)(v.a,{onClick:function(){!function(){var e="";y.length<8&&z(e="Password must be at least 8 characters."),t.currentUser&&Object(g.e)(t.currentUser,y).then((function(){U("Password change was successful!"),z("")})).catch((function(t){"auth/requires-recent-login"===t.code&&(e="You need to log into your account AGAIN to change your password."),z(e||t.message),U("")}))}(),f(!1),S("")},size:"small",variant:"contained",children:"Save"}),Object(u.jsx)(v.a,{onClick:function(){return f(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})]})},auth:!0},{path:"/signup",element:J,auth:!1},{path:"*",element:function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Not found"})})},auth:!1}],K=function(){var e=p().user;return Object(u.jsx)(i.d,{children:Object(u.jsx)(i.b,{path:"/",element:Object(u.jsx)(y,{}),children:Y.map((function(t){return Object(u.jsx)(i.b,{path:t.path,element:t.auth&&!e?Object(u.jsx)(B,{}):Object(u.jsx)(t.element,{})},"route ".concat(t.path))}))})})};a(137).a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"}),s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(d.a,{children:Object(u.jsx)(x,{children:Object(u.jsx)(K,{})})})}),document.getElementById("root"))},58:function(e,t,a){e.exports={wrap:"UserPage_wrap__10sJT",items:"UserPage_items__2yU0S",email:"UserPage_email__jDHl5"}},82:function(e,t,a){e.exports={wrap:"Header_wrap__2P2Pp",logo:"Header_logo__3fwT6"}}},[[258,1,2]]]);
//# sourceMappingURL=main.343341b6.chunk.js.map