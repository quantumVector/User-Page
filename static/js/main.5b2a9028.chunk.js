(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{131:function(e,t,n){e.exports={wrap:"Footer_wrap__1hFOt"}},151:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(48),i=n.n(c),s=(n(151),n(34)),o=n(11),l=n(64),j=n(50),u=n(22),d=n(2),b=Object(a.createContext)({}),x=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(l.b)(),x=Object(u.h)();Object(a.useEffect)((function(){var e=Object(l.c)(s,(function(e){i(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var O=function(e,t){var n=new Promise((function(n,a){var r="";Object(j.b)(s,e,t).then((function(e){var t=e.user;r="success",x("/user/".concat(t.uid)),n(r)})).catch((function(e){"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(r="The email or password is incorrect."),n(r)}))}));return n},h=function(e,t){var n=new Promise((function(n,a){var r="";Object(j.a)(s,e,t).then((function(e){var t=e.user;x("/user/".concat(t.uid)),n(r)})).catch((function(e){"auth/email-already-in-use"===e.code&&(r="This email address has already been registered."),n(r)}))}));return n},m=function(){Object(j.c)(s).then((function(){x("/")})).catch((function(e){console.log("faild",e)}))},f=Object(a.useMemo)((function(){return{user:c,setUser:i,auth:s,login:O,signup:h,signout:m}}),[c]);return Object(d.jsx)(b.Provider,{value:f,children:t})};n(130).a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"});var O=n(131),h=n.n(O),m=function(){return Object(d.jsx)("footer",{className:h.a.wrap,children:"User Page Project 2021"})},f=n(81),p=n.n(f),g=n(297),v=function(){return Object(a.useContext)(b)},w=function(){var e=v(),t=e.user,n=e.signout;return Object(d.jsxs)("header",{className:p.a.wrap,children:[Object(d.jsx)("div",{className:p.a.logo,children:"User Page"}),Object(d.jsx)("div",{className:p.a.links,children:t?Object(d.jsx)(g.a,{onClick:function(){n()},size:"large",variant:"contained",children:"Log out"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g.a,{component:s.c,to:"/",size:"large",variant:"contained",sx:{marginRight:2},children:"Login"}),Object(d.jsx)(g.a,{component:s.c,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},y=n(298),S=function(){return Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(w,{}),Object(d.jsx)(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(u.b,{})}),Object(d.jsx)(m,{})]})},C=function(e){var t=e.children,n=e.redirectTo;return v().user?t:Object(d.jsx)(u.a,{to:n})},k=n(35),P=n(295),I=n(301),z=n(27),L=n(293),T=function(){var e=Object(z.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(z.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(L.a,Object(k.a)(Object(k.a)({},a),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:350},error:!!n.email,helperText:n.email?null===(t=n.email)||void 0===t?void 0:t.message:""}))}})},A=function(){var e=Object(z.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(z.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(L.a,Object(k.a)(Object(k.a)({},a),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:350},error:!!n.password,helperText:n.password?null===(t=n.password)||void 0===t?void 0:t.message:""}))}})},B=function(){var e=Object(z.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(z.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(L.a,Object(k.a)(Object(k.a)({},a),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:350},error:!!n.confirmPassword,helperText:n.confirmPassword?null===(t=n.confirmPassword)||void 0===t?void 0:t.message:""}))}})},N=function(e){var t=e.text;return Object(d.jsx)(I.a,{textAlign:"center",children:Object(d.jsx)(g.a,{type:"submit",variant:"outlined",size:"large",children:t})})},W=n(79),_=n(43),E=_.a().shape({email:_.c().email().required(),password:_.c().min(8).max(20).required()}),F=_.a().shape({email:_.c().email().required(),password:_.c().required().min(8).max(20),confirmPassword:_.c().required().oneOf([_.b("password"),null],"Passwords must match")}),U=function(){var e=v(),t=e.user,n=e.login,r=Object(z.f)({resolver:Object(W.a)(E)}),c=Object(a.useState)(""),i=Object(o.a)(c,2),l=i[0],j=i[1];return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Login"}),l&&Object(d.jsx)(P.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(z.b,Object(k.a)(Object(k.a)({},r),{},{children:Object(d.jsxs)("form",{onSubmit:r.handleSubmit((function(e){n(e.email,e.password).then((function(e){"success"!==e&&j(e)}))})),children:[Object(d.jsx)(T,{}),Object(d.jsx)(A,{}),Object(d.jsx)(N,{text:"Login"}),Object(d.jsx)(I.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Don't have an account? ",Object(d.jsx)(s.b,{to:"/signup",children:"Sign up"})]})})]})}))]})},q=n(1),D=n.n(q),V=n(5),G=function(){var e=v(),t=e.user,n=e.signup,r=Object(z.f)({resolver:Object(W.a)(F)}),c=Object(a.useState)(""),i=Object(o.a)(c,2),l=i[0],j=i[1],b=function(){var e=Object(V.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.email,t.password).then((function(e){"success"!==e&&j(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Sign up"}),l&&Object(d.jsx)(P.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(z.b,Object(k.a)(Object(k.a)({},r),{},{children:Object(d.jsxs)("form",{onSubmit:r.handleSubmit(b),children:[Object(d.jsx)(T,{}),Object(d.jsx)(A,{}),Object(d.jsx)(B,{}),Object(d.jsx)(N,{text:"Sign up"}),Object(d.jsx)(I.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Already have an account?  ",Object(d.jsx)(s.b,{to:"/",children:"Log in"})]})})]})}))]})},J=n(299),M=n.p+"static/media/avatar-default-icon.3d77e961.png",H=function(){return Object(d.jsx)(J.a,{src:M,sx:{width:250,height:250}})},Y=function(){var e=v(),t=e.auth,n=e.user,r=Object(a.useState)(!1),c=Object(o.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),b=u[0],x=u[1],O=Object(a.useState)(""),h=Object(o.a)(O,2),m=h[0],f=h[1],p=Object(a.useState)(""),w=Object(o.a)(p,2),y=w[0],S=w[1];Object(a.useEffect)((function(){(null===n||void 0===n?void 0:n.email)&&x(n.email)}),[n]);return Object(d.jsxs)(d.Fragment,{children:[m&&Object(d.jsx)(P.a,{severity:"error",style:{margin:"20px 0",maxWidth:"300px"},children:m}),y&&Object(d.jsx)(P.a,{severity:"success",style:{margin:"20px 0",maxWidth:"300px"},children:y}),!i&&Object(d.jsxs)(I.a,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{width:"100%",height:50,marginBottom:2},children:[Object(d.jsx)(L.a,{disabled:!0,value:b,variant:"standard",sx:{width:"176px"}}),Object(d.jsx)(g.a,{onClick:function(){s(!0),x(""),f("")},size:"small",sx:{marginLeft:2},variant:"contained",children:"Change email"})]}),i&&Object(d.jsxs)(I.a,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{height:50,marginBottom:2},children:[Object(d.jsx)(L.a,{label:"Enter new email",variant:"standard",onChange:function(e){return x(e.target.value)}}),Object(d.jsx)(g.a,{onClick:function(){b?t.currentUser&&Object(j.d)(t.currentUser,b).then((function(){S("Email change was successful!"),f("")})).catch((function(e){switch(e.code){case"auth/requires-recent-login":f("You need to log into your account AGAIN to change your mail.");break;case"auth/invalid-email":f("Please enter a valid email.");break;default:f(e.message)}S(""),(null===n||void 0===n?void 0:n.email)&&x(n.email)})):(f("Empty string is invalid."),S(""),(null===n||void 0===n?void 0:n.email)&&x(null===n||void 0===n?void 0:n.email)),s(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(d.jsx)(g.a,{onClick:function(){s(!1),(null===n||void 0===n?void 0:n.email)&&x(null===n||void 0===n?void 0:n.email),f("")},size:"small",variant:"contained",sx:{marginLeft:1},children:"Can\u0441el"})]})]})},Z=function(){var e=v().auth,t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],b=Object(a.useState)(""),x=Object(o.a)(b,2),O=x[0],h=x[1],m=Object(a.useState)(""),f=Object(o.a)(m,2),p=f[0],w=f[1];return Object(d.jsxs)(d.Fragment,{children:[O&&Object(d.jsx)(P.a,{severity:"error",style:{margin:"20px 0",maxWidth:"300px"},children:O}),p&&Object(d.jsx)(P.a,{severity:"success",style:{margin:"20px 0",maxWidth:"300px"},children:p}),!r&&Object(d.jsxs)(I.a,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{width:"100%",height:50,marginBottom:2},children:[Object(d.jsx)(L.a,{disabled:!0,type:"password",defaultValue:"111111111111111111111111111",variant:"standard",sx:{width:"176px"}}),Object(d.jsx)(g.a,{onClick:function(){c(!0),h(""),w("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change password"})]}),r&&Object(d.jsxs)(I.a,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{width:"100%",height:50,marginBottom:2},children:[Object(d.jsx)(L.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return u(e.target.value)}}),Object(d.jsx)(g.a,{onClick:function(){l&&l.length>=8?e.currentUser&&Object(j.e)(e.currentUser,l).then((function(){w("Password change was successful!"),h("")})).catch((function(e){"auth/requires-recent-login"===e.code?h("You need to log into your account AGAIN to change your password."):h(e.message)})):h("Password must be at least 8 characters."),c(!1),u("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(d.jsx)(g.a,{onClick:function(){return c(!1)},size:"small",variant:"contained",sx:{marginLeft:1},children:"Can\u0441el"})]})]})},K=function(){return Object(d.jsxs)(I.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(d.jsx)(H,{}),Object(d.jsx)(Y,{}),Object(d.jsx)(Z,{})]})},Q=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Not found"})})},R=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(u.e,{children:Object(d.jsxs)(u.c,{path:"/",element:Object(d.jsx)(S,{}),children:[Object(d.jsx)(u.c,{index:!0,element:Object(d.jsx)(U,{})}),Object(d.jsx)(u.c,{path:"/signup",element:Object(d.jsx)(G,{})}),Object(d.jsx)(u.c,{path:"/user/:id",element:Object(d.jsx)(C,{redirectTo:"/",children:Object(d.jsx)(K,{})})}),Object(d.jsx)(u.c,{path:"*",element:Object(d.jsx)(Q,{})})]})})})};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(s.a,{children:Object(d.jsx)(x,{children:Object(d.jsx)(R,{})})})}),document.getElementById("root"))},81:function(e,t,n){e.exports={wrap:"Header_wrap__1UueV",logo:"Header_logo__1xOSZ"}}},[[257,1,2]]]);
//# sourceMappingURL=main.5b2a9028.chunk.js.map