(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{128:function(e,t,a){e.exports={wrap:"Footer_wrap__2e-v6"}},152:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),s=a.n(c),i=(a(152),a(22)),o=a(128),l=a.n(o),j=a(2),u=function(){return Object(j.jsx)("footer",{className:l.a.wrap,children:"User Page Project 2021"})},d=a(36),b=a(82),O=a.n(b),h=a(11),m=a(65),x=Object(n.createContext)({}),f=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(h.a)(a,2),c=r[0],s=r[1],i=Object(m.b)();Object(n.useEffect)((function(){var e=Object(m.c)(i,(function(e){s(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var o=Object(n.useMemo)((function(){return{user:c,setUser:s,auth:i}}),[c]);return Object(j.jsx)(x.Provider,{value:o,children:t})},p=function(){return Object(n.useContext)(x)},g=a(38),v=a(298),w=function(){var e=p(),t=e.auth,a=e.user,n=Object(i.g)();return Object(j.jsxs)("header",{className:O.a.wrap,children:[Object(j.jsx)("div",{className:O.a.logo,children:"User Page Project"}),Object(j.jsx)("div",{className:O.a.links,children:a?Object(j.jsx)(v.a,{onClick:function(){Object(g.c)(t).then((function(){n("/")})).catch((function(e){console.log("faild",e)}))},size:"large",variant:"contained",children:"Log out"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v.a,{component:d.c,to:"/",size:"large",variant:"contained",sx:{marginRight:3},children:"Login"}),Object(j.jsx)(v.a,{component:d.c,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},y=function(){return Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(w,{}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(i.a,{})}),Object(j.jsx)(u,{})]})},S=a(32),P=a(296),C=a(299),_=a(302),k=a(27),N=a(294),z=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.email,helperText:a.email?null===(t=a.email)||void 0===t?void 0:t.message:""}))}})},T=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.password,helperText:a.password?null===(t=a.password)||void 0===t?void 0:t.message:""}))}})},I=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(S.a)(Object(S.a)({},n),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.confirmPassword,helperText:a.confirmPassword?null===(t=a.confirmPassword)||void 0===t?void 0:t.message:""}))}})},L=function(e){var t=e.text;return Object(j.jsx)(_.a,{textAlign:"center",children:Object(j.jsx)(v.a,{type:"submit",variant:"outlined",size:"large",children:t})})},U=a(80),A=a(44),E=A.a().shape({email:A.c().email().required(),password:A.c().min(8).max(20).required()}),q=A.a().shape({email:A.c().email().required(),password:A.c().required().min(8).max(20),confirmPassword:A.c().required().oneOf([A.b("password"),null],"Passwords must match")}),F=function(){var e=p(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(U.a)(E)}),c=Object(n.useState)(""),s=Object(h.a)(c,2),o=s[0],l=s[1],u=Object(i.g)();Object(n.useEffect)((function(){a&&u("/user/".concat(a.id))}),[a]);return Object(j.jsxs)(j.Fragment,{children:[o&&Object(j.jsx)(P.a,{severity:"error",style:{margin:20},children:o}),Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)(C.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(j.jsx)(k.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(j.jsxs)("form",{onSubmit:r.handleSubmit((function(e){Object(g.b)(t,e.email,e.password).then((function(e){var t=e.user;u("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(t="The email or password is incorrect."),l(t||e.message)}))})),children:[Object(j.jsx)(z,{}),Object(j.jsx)(T,{}),Object(j.jsx)(L,{text:"Login"}),Object(j.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(j.jsxs)("div",{children:["Don't have an account? ",Object(j.jsx)(d.b,{to:"/signup",children:"Sign up"})]})})]})}))})]})},B=a(1),W=a.n(B),D=a(5),J=function(){var e=p(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(U.a)(q)}),c=Object(n.useState)(""),s=Object(h.a)(c,2),o=s[0],l=s[1],u=Object(i.g)();Object(n.useEffect)((function(){a&&u("/user/".concat(a.id))}),[a]);var b=function(){var e=Object(D.a)(W.a.mark((function e(a){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)(t,a.email,a.password).then((function(e){var t=e.user;u("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/email-already-in-use"===e.code&&(t="This email address has already been registered."),l(t||e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[o&&Object(j.jsx)(P.a,{severity:"error",style:{margin:20},children:o}),Object(j.jsx)("h1",{children:"Sign up"}),Object(j.jsx)(C.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(j.jsx)(k.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(j.jsxs)("form",{onSubmit:r.handleSubmit(b),children:[Object(j.jsx)(z,{}),Object(j.jsx)(T,{}),Object(j.jsx)(I,{}),Object(j.jsx)(L,{text:"Sign up"}),Object(j.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(j.jsxs)("div",{children:["Already have an account?  ",Object(j.jsx)(d.b,{to:"/",children:"Log in"})]})})]})}))})]})},G=a(50),H=a.n(G),M=function(){var e=p(),t=e.auth,a=e.user,r=Object(n.useState)(!1),c=Object(h.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(""),l=Object(h.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(""),O=Object(h.a)(b,2),m=O[0],x=O[1],f=Object(n.useState)(""),w=Object(h.a)(f,2),y=w[0],S=w[1];Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.email)&&d(a.email)}),[a]);return Object(j.jsxs)(j.Fragment,{children:[m&&Object(j.jsx)(P.a,{severity:"error",style:{margin:20},children:m}),y&&Object(j.jsx)(P.a,{severity:"success",style:{margin:20},children:y}),!s&&Object(j.jsxs)("div",{className:H.a.email,children:[Object(j.jsx)("div",{children:u}),Object(j.jsx)(v.a,{onClick:function(){return i(!0)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change email"})]}),s&&Object(j.jsxs)("div",{className:H.a.email,children:[Object(j.jsx)(N.a,{label:"Enter new email",variant:"standard",onChange:function(e){return d(e.target.value)}}),Object(j.jsx)(v.a,{onClick:function(){t.currentUser&&Object(g.d)(t.currentUser,u).then((function(){S("Email change was successful!"),x("")})).catch((function(e){var t="";"auth/requires-recent-login"===e.code&&(t="You need to log into your account AGAIN to change your mail."),"auth/invalid-email"===e.code&&(t="Please enter a valid email."),x(t||e.message),S(""),(null===a||void 0===a?void 0:a.email)&&d(a.email)})),i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(j.jsx)(v.a,{onClick:function(){return i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},V=function(){var e=p().auth,t=Object(n.useState)(!1),a=Object(h.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(""),d=Object(h.a)(u,2),b=d[0],O=d[1],m=Object(n.useState)(""),x=Object(h.a)(m,2),f=x[0],w=x[1];return Object(j.jsxs)(j.Fragment,{children:[b&&Object(j.jsx)(P.a,{severity:"error",style:{margin:20},children:b}),f&&Object(j.jsx)(P.a,{severity:"success",style:{margin:20},children:f}),!r&&Object(j.jsx)(v.a,{onClick:function(){return c(!0)},size:"small",variant:"contained",children:"Change password"}),r&&Object(j.jsxs)("div",{className:H.a.item,children:[Object(j.jsx)(N.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return l(e.target.value)}}),Object(j.jsx)(v.a,{onClick:function(){!function(){var t="";o.length<8&&O(t="Password must be at least 8 characters."),e.currentUser&&Object(g.e)(e.currentUser,o).then((function(){w("Password change was successful!"),O("")})).catch((function(e){"auth/requires-recent-login"===e.code&&(t="You need to log into your account AGAIN to change your password."),O(t||e.message),w("")}))}(),c(!1),l("")},size:"small",variant:"contained",children:"Save"}),Object(j.jsx)(v.a,{onClick:function(){return c(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},Y=a(300),K=a.p+"static/media/avatar-default-icon.3d77e961.png",Q=function(){return Object(j.jsx)(Y.a,{src:K,sx:{width:300,height:300}})},R=[{path:"/",element:F,auth:!1},{path:"/user/:id",element:function(){return Object(j.jsx)("div",{className:H.a.wrap,children:Object(j.jsxs)("div",{className:H.a.items,children:[Object(j.jsx)(Q,{}),Object(j.jsx)(M,{}),Object(j.jsx)(V,{})]})})},auth:!0},{path:"/signup",element:J,auth:!1},{path:"*",element:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Not found"})})},auth:!1}],Z=function(){var e=p().user;return Object(j.jsx)(i.d,{children:Object(j.jsx)(i.b,{path:"/",element:Object(j.jsx)(y,{}),children:R.map((function(t){return Object(j.jsx)(i.b,{path:t.path,element:t.auth&&!e?Object(j.jsx)(F,{}):Object(j.jsx)(t.element,{})},"route ".concat(t.path))}))})})};a(137).a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"}),s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(d.a,{children:Object(j.jsx)(f,{children:Object(j.jsx)(Z,{})})})}),document.getElementById("root"))},50:function(e,t,a){e.exports={wrap:"UserPage_wrap__10sJT",items:"UserPage_items__2yU0S",email:"UserPage_email__jDHl5"}},82:function(e,t,a){e.exports={wrap:"Header_wrap__2P2Pp",logo:"Header_logo__3fwT6"}}},[[258,1,2]]]);
//# sourceMappingURL=main.a7efb302.chunk.js.map