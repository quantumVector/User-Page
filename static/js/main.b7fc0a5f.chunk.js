(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{133:function(e,t,n){e.exports={wrap:"Footer_wrap__1hFOt"}},153:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(47),s=n.n(r),i=(n(153),n(34)),o=n(11),l=n(64),j=n(49),u=n(22),d=n(2),b=Object(a.createContext)({}),O=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(l.b)(),O=Object(u.h)();Object(a.useEffect)((function(){var e=Object(l.c)(i,(function(e){s(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var m=function(e,t){var n=new Promise((function(n,a){var c="";Object(j.b)(i,e,t).then((function(e){var t=e.user;c="success",O("/user/".concat(t.uid)),n(c)})).catch((function(e){"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(c="The email or password is incorrect."),n(c)}))}));return n},h=function(e,t){var n=new Promise((function(n,a){var c="";Object(j.a)(i,e,t).then((function(e){var t=e.user;O("/user/".concat(t.uid)),n(c)})).catch((function(e){"auth/email-already-in-use"===e.code&&(c="This email address has already been registered."),n(c)}))}));return n},x=function(){Object(j.c)(i).then((function(){O("/")})).catch((function(e){console.log("faild",e)}))},f=Object(a.useMemo)((function(){return{user:r,setUser:s,auth:i,login:m,signup:h,signout:x}}),[r]);return Object(d.jsx)(b.Provider,{value:f,children:t})};n(132).a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"});var m=n(133),h=n.n(m),x=function(){return Object(d.jsx)("footer",{className:h.a.wrap,children:"User Page Project 2021"})},f=n(81),g=n.n(f),p=n(299),v=function(){return Object(a.useContext)(b)},w=function(){var e=v(),t=e.user,n=e.signout;return Object(d.jsxs)("header",{className:g.a.wrap,children:[Object(d.jsx)("div",{className:g.a.logo,children:"User Page Project"}),Object(d.jsx)("div",{className:g.a.links,children:t?Object(d.jsx)(p.a,{onClick:function(){n()},size:"large",variant:"contained",children:"Log out"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{component:i.c,to:"/",size:"large",variant:"contained",sx:{marginRight:3},children:"Login"}),Object(d.jsx)(p.a,{component:i.c,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},y=function(){return Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(w,{}),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(u.b,{})}),Object(d.jsx)(x,{})]})},S=function(e){var t=e.children,n=e.redirectTo;return v().user?t:Object(d.jsx)(u.a,{to:n})},C=n(35),k=n(297),P=n(300),_=n(303),N=n(27),z=n(295),T=function(){var e=Object(N.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(N.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(z.a,Object(C.a)(Object(C.a)({},a),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.email,helperText:n.email?null===(t=n.email)||void 0===t?void 0:t.message:""}))}})},I=function(){var e=Object(N.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(N.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(z.a,Object(C.a)(Object(C.a)({},a),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.password,helperText:n.password?null===(t=n.password)||void 0===t?void 0:t.message:""}))}})},L=function(){var e=Object(N.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(N.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(z.a,Object(C.a)(Object(C.a)({},a),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.confirmPassword,helperText:n.confirmPassword?null===(t=n.confirmPassword)||void 0===t?void 0:t.message:""}))}})},A=function(e){var t=e.text;return Object(d.jsx)(_.a,{textAlign:"center",children:Object(d.jsx)(p.a,{type:"submit",variant:"outlined",size:"large",children:t})})},U=n(79),E=n(43),F=E.a().shape({email:E.c().email().required(),password:E.c().min(8).max(20).required()}),q=E.a().shape({email:E.c().email().required(),password:E.c().required().min(8).max(20),confirmPassword:E.c().required().oneOf([E.b("password"),null],"Passwords must match")}),B=function(){var e=v(),t=e.user,n=e.login,c=Object(N.f)({resolver:Object(U.a)(F)}),r=Object(a.useState)(""),s=Object(o.a)(r,2),l=s[0],j=s[1];return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Login"}),l&&Object(d.jsx)(k.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(P.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(N.b,Object(C.a)(Object(C.a)({},c),{},{children:Object(d.jsxs)("form",{onSubmit:c.handleSubmit((function(e){n(e.email,e.password).then((function(e){"success"!==e&&j(e)}))})),children:[Object(d.jsx)(T,{}),Object(d.jsx)(I,{}),Object(d.jsx)(A,{text:"Login"}),Object(d.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Don't have an account? ",Object(d.jsx)(i.b,{to:"/signup",children:"Sign up"})]})})]})}))})]})},W=n(1),V=n.n(W),D=n(5),G=function(){var e=v(),t=e.user,n=e.signup,c=Object(N.f)({resolver:Object(U.a)(q)}),r=Object(a.useState)(""),s=Object(o.a)(r,2),l=s[0],j=s[1],b=function(){var e=Object(D.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.email,t.password).then((function(e){"success"!==e&&j(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Sign up"}),l&&Object(d.jsx)(k.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(P.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(N.b,Object(C.a)(Object(C.a)({},c),{},{children:Object(d.jsxs)("form",{onSubmit:c.handleSubmit(b),children:[Object(d.jsx)(T,{}),Object(d.jsx)(I,{}),Object(d.jsx)(L,{}),Object(d.jsx)(A,{text:"Sign up"}),Object(d.jsx)(_.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Already have an account?  ",Object(d.jsx)(i.b,{to:"/",children:"Log in"})]})})]})}))})]})},J=n(301),M=n.p+"static/media/avatar-default-icon.3d77e961.png",H=function(){return Object(d.jsx)(J.a,{src:M,sx:{width:300,height:300}})},Y=n(98),Z=n.n(Y),K=function(){var e=v(),t=e.auth,n=e.user,c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),b=u[0],O=u[1],m=Object(a.useState)(""),h=Object(o.a)(m,2),x=h[0],f=h[1],g=Object(a.useState)(""),w=Object(o.a)(g,2),y=w[0],S=w[1];Object(a.useEffect)((function(){(null===n||void 0===n?void 0:n.email)&&O(n.email)}),[n]);return Object(d.jsxs)(d.Fragment,{children:[x&&Object(d.jsx)(k.a,{severity:"error",style:{margin:20},children:x}),y&&Object(d.jsx)(k.a,{severity:"success",style:{margin:20},children:y}),!s&&Object(d.jsxs)("div",{className:Z.a.email,children:[Object(d.jsx)("div",{children:b}),Object(d.jsx)(p.a,{onClick:function(){i(!0),O(""),f("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change email"})]}),s&&Object(d.jsxs)("div",{className:Z.a.email,children:[Object(d.jsx)(z.a,{label:"Enter new email",variant:"standard",onChange:function(e){return O(e.target.value)}}),Object(d.jsx)(p.a,{onClick:function(){b?t.currentUser&&Object(j.d)(t.currentUser,b).then((function(){S("Email change was successful!"),f("")})).catch((function(e){switch(e.code){case"auth/requires-recent-login":f("You need to log into your account AGAIN to change your mail.");break;case"auth/invalid-email":f("Please enter a valid email.");break;default:f(e.message)}S(""),(null===n||void 0===n?void 0:n.email)&&O(n.email)})):(f("Empty string is invalid."),S(""),(null===n||void 0===n?void 0:n.email)&&O(null===n||void 0===n?void 0:n.email)),i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(d.jsx)(p.a,{onClick:function(){i(!1),(null===n||void 0===n?void 0:n.email)&&O(null===n||void 0===n?void 0:n.email),f("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},Q=function(){var e=v().auth,t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(a.useState)(""),O=Object(o.a)(b,2),m=O[0],h=O[1],x=Object(a.useState)(""),f=Object(o.a)(x,2),g=f[0],w=f[1];return Object(d.jsxs)(d.Fragment,{children:[m&&Object(d.jsx)(k.a,{severity:"error",style:{margin:20},children:m}),g&&Object(d.jsx)(k.a,{severity:"success",style:{margin:20},children:g}),!c&&Object(d.jsx)(p.a,{onClick:function(){r(!0),h(""),w("")},size:"small",variant:"contained",children:"Change password"}),c&&Object(d.jsxs)("div",{children:[Object(d.jsx)(z.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return u(e.target.value)}}),Object(d.jsx)(p.a,{onClick:function(){l&&l.length>=8?e.currentUser&&Object(j.e)(e.currentUser,l).then((function(){w("Password change was successful!"),h("")})).catch((function(e){"auth/requires-recent-login"===e.code?h("You need to log into your account AGAIN to change your password."):h(e.message)})):h("Password must be at least 8 characters."),r(!1),u("")},size:"small",variant:"contained",children:"Save"}),Object(d.jsx)(p.a,{onClick:function(){return r(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},R=n(99),X=n.n(R),$=function(){return Object(d.jsx)("div",{className:X.a.wrap,children:Object(d.jsxs)("div",{className:X.a.items,children:[Object(d.jsx)(H,{}),Object(d.jsx)(K,{}),Object(d.jsx)(Q,{})]})})},ee=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Not found"})})},te=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(u.e,{children:Object(d.jsxs)(u.c,{path:"/",element:Object(d.jsx)(y,{}),children:[Object(d.jsx)(u.c,{index:!0,element:Object(d.jsx)(B,{})}),Object(d.jsx)(u.c,{path:"/signup",element:Object(d.jsx)(G,{})}),Object(d.jsx)(u.c,{path:"/user/:id",element:Object(d.jsx)(S,{redirectTo:"/",children:Object(d.jsx)($,{})})}),Object(d.jsx)(u.c,{path:"*",element:Object(d.jsx)(ee,{})})]})})})};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(O,{children:Object(d.jsx)(te,{})})})}),document.getElementById("root"))},81:function(e,t,n){e.exports={wrap:"Header_wrap__1UueV",logo:"Header_logo__1xOSZ"}},98:function(e,t,n){e.exports={email:"EmailBlock_email__2OXxf"}},99:function(e,t,n){e.exports={wrap:"UserPage_wrap__19rCu",items:"UserPage_items__etOnb"}}},[[259,1,2]]]);
//# sourceMappingURL=main.b7fc0a5f.chunk.js.map