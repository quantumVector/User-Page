(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{133:function(e,t,n){e.exports={wrap:"Footer_wrap__1hFOt"}},153:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(47),s=n.n(c),i=(n(153),n(36)),o=n(11),l=n(64),j=n(49),u=n(22),d=n(2),b=Object(a.createContext)({}),O=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(l.b)(),O=Object(u.g)();Object(a.useEffect)((function(){var e=Object(l.c)(i,(function(e){s(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var m=function(e,t){var n=new Promise((function(n,a){var r="";Object(j.b)(i,e,t).then((function(e){var t=e.user;r="success",O("/user/".concat(t.uid)),n(r)})).catch((function(e){"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(r="The email or password is incorrect."),n(r)}))}));return n},h=function(e,t){var n=new Promise((function(n,a){var r="";Object(j.a)(i,e,t).then((function(e){var t=e.user;O("/user/".concat(t.uid)),n(r)})).catch((function(e){"auth/email-already-in-use"===e.code&&(r="This email address has already been registered."),n(r)}))}));return n},x=function(){Object(j.c)(i).then((function(){O("/")})).catch((function(e){console.log("faild",e)}))},f=Object(a.useMemo)((function(){return{user:c,setUser:s,auth:i,login:m,signup:h,signout:x}}),[c]);return Object(d.jsx)(b.Provider,{value:f,children:t})};n(132).a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"});var m=n(133),h=n.n(m),x=function(){return Object(d.jsx)("footer",{className:h.a.wrap,children:"User Page Project 2021"})},f=n(81),g=n.n(f),p=n(299),v=function(){return Object(a.useContext)(b)},w=function(){var e=v(),t=e.user,n=e.signout;return Object(d.jsxs)("header",{className:g.a.wrap,children:[Object(d.jsx)("div",{className:g.a.logo,children:"User Page Project"}),Object(d.jsx)("div",{className:g.a.links,children:t?Object(d.jsx)(p.a,{onClick:function(){n()},size:"large",variant:"contained",children:"Log out"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{component:i.c,to:"/",size:"large",variant:"contained",sx:{marginRight:3},children:"Login"}),Object(d.jsx)(p.a,{component:i.c,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},y=function(e){var t=e.children,n=e.redirectTo;return v().user?t:Object(d.jsx)(u.a,{to:n})},S=n(34),C=n(297),k=n(300),P=n(303),_=n(27),N=n(295),z=function(){var e=Object(_.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(_.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(N.a,Object(S.a)(Object(S.a)({},a),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.email,helperText:n.email?null===(t=n.email)||void 0===t?void 0:t.message:""}))}})},T=function(){var e=Object(_.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(_.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(N.a,Object(S.a)(Object(S.a)({},a),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.password,helperText:n.password?null===(t=n.password)||void 0===t?void 0:t.message:""}))}})},I=function(){var e=Object(_.g)(),t=e.control,n=e.formState.errors;return Object(d.jsx)(_.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,a=e.field;return Object(d.jsx)(N.a,Object(S.a)(Object(S.a)({},a),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!n.confirmPassword,helperText:n.confirmPassword?null===(t=n.confirmPassword)||void 0===t?void 0:t.message:""}))}})},L=function(e){var t=e.text;return Object(d.jsx)(P.a,{textAlign:"center",children:Object(d.jsx)(p.a,{type:"submit",variant:"outlined",size:"large",children:t})})},A=n(79),U=n(43),E=U.a().shape({email:U.c().email().required(),password:U.c().min(8).max(20).required()}),q=U.a().shape({email:U.c().email().required(),password:U.c().required().min(8).max(20),confirmPassword:U.c().required().oneOf([U.b("password"),null],"Passwords must match")}),F=function(){var e=v(),t=e.user,n=e.login,r=Object(_.f)({resolver:Object(A.a)(E)}),c=Object(a.useState)(""),s=Object(o.a)(c,2),l=s[0],j=s[1];return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Login"}),l&&Object(d.jsx)(C.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(k.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(_.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(d.jsxs)("form",{onSubmit:r.handleSubmit((function(e){n(e.email,e.password).then((function(e){"success"!==e&&j(e)}))})),children:[Object(d.jsx)(z,{}),Object(d.jsx)(T,{}),Object(d.jsx)(L,{text:"Login"}),Object(d.jsx)(P.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Don't have an account? ",Object(d.jsx)(i.b,{to:"/signup",children:"Sign up"})]})})]})}))})]})},B=n(1),W=n.n(B),V=n(5),D=function(){var e=v(),t=e.user,n=e.signup,r=Object(_.f)({resolver:Object(A.a)(q)}),c=Object(a.useState)(""),s=Object(o.a)(c,2),l=s[0],j=s[1],b=function(){var e=Object(V.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.email,t.password).then((function(e){"success"!==e&&j(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(u.a,{to:"/user/".concat(t.id)}),Object(d.jsx)("h1",{children:"Sign up"}),l&&Object(d.jsx)(C.a,{severity:"error",style:{margin:20},children:l}),Object(d.jsx)(k.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(_.b,Object(S.a)(Object(S.a)({},r),{},{children:Object(d.jsxs)("form",{onSubmit:r.handleSubmit(b),children:[Object(d.jsx)(z,{}),Object(d.jsx)(T,{}),Object(d.jsx)(I,{}),Object(d.jsx)(L,{text:"Sign up"}),Object(d.jsx)(P.a,{sx:{textAlign:"center",marginTop:2},children:Object(d.jsxs)("div",{children:["Already have an account?  ",Object(d.jsx)(i.b,{to:"/",children:"Log in"})]})})]})}))})]})},G=n(301),J=n.p+"static/media/avatar-default-icon.3d77e961.png",M=function(){return Object(d.jsx)(G.a,{src:J,sx:{width:300,height:300}})},H=n(98),Y=n.n(H),Z=function(){var e=v(),t=e.auth,n=e.user,r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],i=c[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),b=u[0],O=u[1],m=Object(a.useState)(""),h=Object(o.a)(m,2),x=h[0],f=h[1],g=Object(a.useState)(""),w=Object(o.a)(g,2),y=w[0],S=w[1];Object(a.useEffect)((function(){(null===n||void 0===n?void 0:n.email)&&O(n.email)}),[n]);return Object(d.jsxs)(d.Fragment,{children:[x&&Object(d.jsx)(C.a,{severity:"error",style:{margin:20},children:x}),y&&Object(d.jsx)(C.a,{severity:"success",style:{margin:20},children:y}),!s&&Object(d.jsxs)("div",{className:Y.a.email,children:[Object(d.jsx)("div",{children:b}),Object(d.jsx)(p.a,{onClick:function(){i(!0),O(""),f("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change email"})]}),s&&Object(d.jsxs)("div",{className:Y.a.email,children:[Object(d.jsx)(N.a,{label:"Enter new email",variant:"standard",onChange:function(e){return O(e.target.value)}}),Object(d.jsx)(p.a,{onClick:function(){b?t.currentUser&&Object(j.d)(t.currentUser,b).then((function(){S("Email change was successful!"),f("")})).catch((function(e){switch(e.code){case"auth/requires-recent-login":f("You need to log into your account AGAIN to change your mail.");break;case"auth/invalid-email":f("Please enter a valid email.");break;default:f(e.message)}S(""),(null===n||void 0===n?void 0:n.email)&&O(n.email)})):(f("Empty string is invalid."),S(""),(null===n||void 0===n?void 0:n.email)&&O(null===n||void 0===n?void 0:n.email)),i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(d.jsx)(p.a,{onClick:function(){i(!1),(null===n||void 0===n?void 0:n.email)&&O(null===n||void 0===n?void 0:n.email),f("")},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},K=function(){var e=v().auth,t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(a.useState)(""),O=Object(o.a)(b,2),m=O[0],h=O[1],x=Object(a.useState)(""),f=Object(o.a)(x,2),g=f[0],w=f[1];return Object(d.jsxs)(d.Fragment,{children:[m&&Object(d.jsx)(C.a,{severity:"error",style:{margin:20},children:m}),g&&Object(d.jsx)(C.a,{severity:"success",style:{margin:20},children:g}),!r&&Object(d.jsx)(p.a,{onClick:function(){c(!0),h(""),w("")},size:"small",variant:"contained",children:"Change password"}),r&&Object(d.jsxs)("div",{children:[Object(d.jsx)(N.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return u(e.target.value)}}),Object(d.jsx)(p.a,{onClick:function(){l&&l.length>=8?e.currentUser&&Object(j.e)(e.currentUser,l).then((function(){w("Password change was successful!"),h("")})).catch((function(e){"auth/requires-recent-login"===e.code?h("You need to log into your account AGAIN to change your password."):h(e.message)})):h("Password must be at least 8 characters."),c(!1),u("")},size:"small",variant:"contained",children:"Save"}),Object(d.jsx)(p.a,{onClick:function(){return c(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})},Q=n(99),R=n.n(Q),X=function(){return Object(d.jsx)("div",{className:R.a.wrap,children:Object(d.jsxs)("div",{className:R.a.items,children:[Object(d.jsx)(M,{}),Object(d.jsx)(Z,{}),Object(d.jsx)(K,{})]})})},$=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Not found"})})},ee=function(){return Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(w,{}),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{path:"/",element:Object(d.jsx)(F,{})}),Object(d.jsx)(u.b,{path:"/signup",element:Object(d.jsx)(D,{})}),Object(d.jsx)(u.b,{path:"/user/:id",element:Object(d.jsx)(y,{redirectTo:"/",children:Object(d.jsx)(X,{})})}),Object(d.jsx)(u.b,{path:"*",element:Object(d.jsx)($,{})})]})}),Object(d.jsx)(x,{})]})};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(O,{children:Object(d.jsx)(ee,{})})})}),document.getElementById("root"))},81:function(e,t,n){e.exports={wrap:"Header_wrap__1UueV",logo:"Header_logo__1xOSZ"}},98:function(e,t,n){e.exports={email:"EmailBlock_email__2OXxf"}},99:function(e,t,n){e.exports={wrap:"UserPage_wrap__19rCu",items:"UserPage_items__etOnb"}}},[[259,1,2]]]);
//# sourceMappingURL=main.c4190959.chunk.js.map