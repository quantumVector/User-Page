(this["webpackJsonpuser-page"]=this["webpackJsonpuser-page"]||[]).push([[0],{132:function(e,t,a){e.exports={wrap:"Footer_wrap__2e-v6"}},152:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),s=a.n(c),i=(a(152),a(128)),o=a(22),l=a(132),u=a.n(l),j=a(3),d=function(){return Object(j.jsx)("footer",{className:u.a.wrap,children:"User Page Project 2021"})},b=a(37),m=a(82),h=a.n(m),O=a(11),f=a(64),x=Object(n.createContext)({}),p=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(O.a)(a,2),c=r[0],s=r[1],i=Object(f.b)();Object(n.useEffect)((function(){var e=Object(f.c)(i,(function(e){s(e?{id:e.uid,name:"",email:e.email}:null)}));return function(){return e()}}),[]);var o=Object(n.useMemo)((function(){return{user:c,setUser:s,auth:i}}),[c]);return Object(j.jsx)(x.Provider,{value:o,children:t})},g=function(){return Object(n.useContext)(x)},v=a(41),w=a(298),y=function(){var e=g(),t=e.auth,a=e.user,n=Object(o.g)();return Object(j.jsxs)("header",{className:h.a.wrap,children:[Object(j.jsx)("div",{className:h.a.logo,children:"User Page Project"}),Object(j.jsx)("div",{className:h.a.links,children:a?Object(j.jsx)(w.a,{onClick:function(){Object(v.c)(t).then((function(){n("/")})).catch((function(e){console.log("faild",e)}))},size:"large",variant:"contained",children:"Log out"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w.a,{component:b.b,to:"/",size:"large",variant:"contained",sx:{marginRight:3},children:"Login"}),Object(j.jsx)(w.a,{component:b.b,to:"/signup",size:"large",variant:"contained",children:"Sign up"})]})})]})},S=function(){return Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(y,{}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(o.a,{})}),Object(j.jsx)(d,{})]})},P=a(32),C=a(296),_=a(299),k=a(27),N=a(294),z=a(302),I=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"email",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(P.a)(Object(P.a)({},n),{},{label:"Email",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.email,helperText:a.email?null===(t=a.email)||void 0===t?void 0:t.message:""}))}})},U=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"password",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(P.a)(Object(P.a)({},n),{},{type:"password",label:"Password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.password,helperText:a.password?null===(t=a.password)||void 0===t?void 0:t.message:""}))}})},L=function(){var e=Object(k.g)(),t=e.control,a=e.formState.errors;return Object(j.jsx)(k.a,{name:"confirmPassword",control:t,defaultValue:"",render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(P.a)(Object(P.a)({},n),{},{type:"password",label:"Confirm password",variant:"outlined",fullWidth:!0,sx:{display:"block",marginTop:3,marginBottom:3,width:400},error:!!a.confirmPassword,helperText:a.confirmPassword?null===(t=a.confirmPassword)||void 0===t?void 0:t.message:""}))}})},T=function(e){var t=e.text;return Object(j.jsx)(z.a,{textAlign:"center",children:Object(j.jsx)(w.a,{type:"submit",variant:"outlined",size:"large",children:t})})},E=a(80),q=a(44),A=q.a().shape({email:q.c().email().required(),password:q.c().min(8).max(20).required()}),B=q.a().shape({email:q.c().email().required(),password:q.c().required().min(8).max(20),confirmPassword:q.c().required().oneOf([q.b("password"),null],"Passwords must match")}),W=function(){var e=g(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(E.a)(A)}),c=Object(n.useState)(""),s=Object(O.a)(c,2),i=s[0],l=s[1],u=Object(o.g)();Object(n.useEffect)((function(){a&&u("/user/".concat(a.id))}),[a]);return Object(j.jsxs)(j.Fragment,{children:[i&&Object(j.jsx)(C.a,{severity:"error",style:{margin:20},children:i}),Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)(_.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"",children:Object(j.jsx)(k.b,Object(P.a)(Object(P.a)({},r),{},{children:Object(j.jsxs)("form",{onSubmit:r.handleSubmit((function(e){Object(v.b)(t,e.email,e.password).then((function(e){var t=e.user;u("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/user-not-found"!==e.code&&"auth/wrong-password"!==e.code||(t="The email or password is incorrect."),l(t||e.message)}))})),children:[Object(j.jsx)(I,{}),Object(j.jsx)(U,{}),Object(j.jsx)(T,{text:"Login"})]})}))})]})},F=a(1),J=a.n(F),D=a(5),G=function(){var e=g(),t=e.auth,a=e.user,r=Object(k.f)({resolver:Object(E.a)(B)}),c=Object(n.useState)(""),s=Object(O.a)(c,2),i=s[0],l=s[1],u=Object(o.g)();Object(n.useEffect)((function(){a&&u("/user/".concat(a.id))}),[a]);var d=function(){var e=Object(D.a)(J.a.mark((function e(a){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(t,a.email,a.password).then((function(e){var t=e.user;u("/user/".concat(t.uid))})).catch((function(e){var t="";"auth/email-already-in-use"===e.code&&(t="This email address has already been registered."),l(t||e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[i&&Object(j.jsx)(C.a,{severity:"error",style:{margin:20},children:i}),Object(j.jsx)("h1",{children:"Sign up"}),Object(j.jsx)(_.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"",children:Object(j.jsx)(k.b,Object(P.a)(Object(P.a)({},r),{},{children:Object(j.jsxs)("form",{onSubmit:r.handleSubmit(d),children:[Object(j.jsx)(I,{}),Object(j.jsx)(U,{}),Object(j.jsx)(L,{}),Object(j.jsx)(T,{text:"Sign up"})]})}))})]})},H=a(58),M=a.n(H),V=a(300),Y=a.p+"static/media/avatar-default-icon.3d77e961.png",K=[{path:"/",element:W,auth:!1},{path:"/user/:id",element:function(){var e=g(),t=e.auth,a=e.user,r=Object(n.useState)(!1),c=Object(O.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(""),l=Object(O.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(!1),m=Object(O.a)(b,2),h=m[0],f=m[1],x=Object(n.useState)(""),p=Object(O.a)(x,2),y=p[0],S=p[1],P=Object(n.useState)(""),_=Object(O.a)(P,2),k=_[0],z=_[1],I=Object(n.useState)(""),U=Object(O.a)(I,2),L=U[0],T=U[1];Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.email)&&d(a.email)}),[a]);return Object(j.jsxs)("div",{className:M.a.wrap,children:[Object(j.jsx)(V.a,{src:Y,sx:{width:300,height:300}}),k&&Object(j.jsx)(C.a,{severity:"error",style:{margin:20},children:k}),L&&Object(j.jsx)(C.a,{severity:"success",style:{margin:20},children:L}),Object(j.jsxs)("div",{className:M.a.items,children:[!s&&Object(j.jsxs)("div",{className:M.a.email,children:[Object(j.jsx)("div",{children:u}),Object(j.jsx)(w.a,{onClick:function(){return i(!0)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Change email"})]}),s&&Object(j.jsxs)("div",{className:M.a.email,children:[Object(j.jsx)(N.a,{label:"Enter new email",variant:"standard",onChange:function(e){return d(e.target.value)}}),Object(j.jsx)(w.a,{onClick:function(){t.currentUser&&Object(v.d)(t.currentUser,u).then((function(){T("Email change was successful!"),z("")})).catch((function(e){var t="";"auth/requires-recent-login"===e.code&&(t="You need to log into your account AGAIN to change your mail."),"auth/invalid-email"===e.code&&(t="Please enter a valid email."),z(t||e.message),T(""),(null===a||void 0===a?void 0:a.email)&&d(a.email)})),i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Save"}),Object(j.jsx)(w.a,{onClick:function(){return i(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]}),!h&&Object(j.jsx)(w.a,{onClick:function(){return f(!0)},size:"small",variant:"contained",children:"Change password"}),h&&Object(j.jsxs)("div",{className:M.a.item,children:[Object(j.jsx)(N.a,{label:"Enter new password",type:"password",variant:"standard",onChange:function(e){return S(e.target.value)}}),Object(j.jsx)(w.a,{onClick:function(){!function(){var e="";y.length<8&&z(e="Password must be at least 8 characters."),t.currentUser&&Object(v.e)(t.currentUser,y).then((function(){T("Password change was successful!"),z("")})).catch((function(t){"auth/requires-recent-login"===t.code&&(e="You need to log into your account AGAIN to change your password."),z(e||t.message),T("")}))}(),f(!1),S("")},size:"small",variant:"contained",children:"Save"}),Object(j.jsx)(w.a,{onClick:function(){return f(!1)},size:"small",variant:"contained",sx:{marginLeft:2},children:"Can\u0441el"})]})]})]})},auth:!0},{path:"/signup",element:G,auth:!1},{path:"*",element:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Not found"})})},auth:!1}],Q=function(){var e=g().user;return Object(j.jsx)(o.d,{children:Object(j.jsx)(o.b,{path:"/",element:Object(j.jsx)(S,{}),children:K.map((function(t){return Object(j.jsx)(o.b,{path:t.path,element:t.auth&&!e?Object(j.jsx)(W,{}):Object(j.jsx)(t.element,{})},"route ".concat(t.path))}))})})};i.a({apiKey:"AIzaSyDCpry19k3lALtiix4kQ3I4zzijM3LW14o",authDomain:"user-page-3cfeb.firebaseapp.com",projectId:"user-page-3cfeb",storageBucket:"user-page-3cfeb.appspot.com",messagingSenderId:"74694622364",appId:"1:74694622364:web:6651db478f9b970af14159",measurementId:"G-7WN52ZJP4C"}),s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(b.a,{children:Object(j.jsx)(p,{children:Object(j.jsx)(Q,{})})})}),document.getElementById("root"))},58:function(e,t,a){e.exports={wrap:"UserPage_wrap__10sJT",items:"UserPage_items__2yU0S",email:"UserPage_email__jDHl5"}},82:function(e,t,a){e.exports={wrap:"Header_wrap__2P2Pp",logo:"Header_logo__3fwT6"}}},[[258,1,2]]]);
//# sourceMappingURL=main.f1e342f8.chunk.js.map